<mat-spinner *ngIf="isLoading"></mat-spinner>
<form [formGroup]="postCreateForm" (submit)="onSavePost(postCreateForm.value)" *ngIf="!isLoading">
  <mat-form-field>
    <input
      matInput
      type="text"
      formControlName="name"
      placeholder="Name"
    />
    <mat-error *ngIf="postCreateForm.get('name').invalid"
      >Please enter a name.</mat-error
    >
  </mat-form-field>
  <div class="image-block">
    <button mat-stroked-button type="button" (click)="filePicker.click()">
      Pick Image
    </button>
    <input
      type="file"
      #filePicker formControlName="image" (change)="onImagePicked($event)"
      accept="*.png.jpg"
    />
  </div>
  <div class="image-preview">
    <img
      *ngIf="
        imagePreview !== '' && imagePreview && postCreateForm.get('image').valid"
      [src]="imagePreview"
      [alt]="postCreateForm.value.name"
    />
  </div>
  <mat-form-field>
    <input
      matInput
      type="text"
      formControlName="owner"
      placeholder="Owner"
    />
  </mat-form-field>
  <mat-form-field>
    <input
      matInput
      type="text"
      formControlName="since"
      placeholder="Since"
    />
  </mat-form-field>
  <button mat-raised-button color="accent" [disabled]="postCreateForm.invalid" type="submit">Save Post</button>
</form>
